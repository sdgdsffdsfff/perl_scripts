###############
# Introduction
###############
BVS Management System is a platform built for manage bvs clusters.

###############
# Install
###############
1. Install on bvs
# ./install.sh bvs
2. Install on management node.
# ./install.sh manager
NEW: Move manager to online_conf dirs.
3. Un-install
If you want to delete bvs management system, just run this command.
# ./uninstall.sh
Take care, this command will rm the whole directory /home/bvs-manager, including log file and config files.

###############
# Scripts 
###############
BVS Management System is written in Perl. It contains two parts: scripts 
on bvs node and manager on management node.The source of scripts on bvs is
put in directory bvs and the source of manager on management node is put
in directory manager.

1. scripts on bvs.
   * common.pl			Basic functions, required by other scripts.
   * get_backend_ip		Show backend ip of the specified virtual server. 
   * get_vs_rs			Show real server of the specified virtual server. 
   * reload_keepalived		Reload keepalived according to the parameter.
   * vip_adm			Enable/Disable or list vip on lo, modify /etc/rc.local
				if needed.
   * show_vs			Show all virtual server on this bvs node. It gets info 
				from /proc/sys/bvs/ip_vs.

Each command is nothing to do with other commands and only requires the common.pl. You 
can run each of them independently. 

2. scripts on management node
   * common.pl			Basic functions, required by other scripts.
   * bvsadm			Main script to run all the commands supported.

###################
# Usage for bvsadm
###################
Run "bvsadm" to show this usage.
Usage: bvsadm [command] [[option]=[value]]
  add_sv|del_sv           service_name=[service name]
  add_vs|edit_vs          vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name] [vs config]=[value]
  del_vs                  vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name]
  add_rs                  vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name] rip=[rip] rport=[rport]
                          checker=[checker] [rs config]=[value]
  del_rs                  vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name] rip=[rip] rport=[rport]
  add_bip                 vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name] bip=[rip] dev=[dev] mask=[mask]
  del_bip                 vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name] bip=[rip]
  enable_vip|disable_vip  vip=[vip]
  reload_keepalived       process=[process]
  get_conf_all_sv
  get_conf_sv             service_name=[service name]
  get_conf_vs             vip=[vip] vport=[vport] protocol=[protocol]
  get_conf_rs             vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name]
  get_conf_bip            vip=[vip] vport=[vport] protocol=[protocol]
                          service_name=[service name]
  get_bvs_vs
  get_bvs_rs              vip=[vip] vport=[vport] protocol=[protocol]
  get_bvs_bip             vip=[vip] vport=[vport] protocol=[protocol]
  upload_config
  download_config
  backup_config

Commands:
  add_sv              Add a service
  del_sv              Delete a service
  add_vs              Add a virtual server
  del_vs              Delete a virtual server
  edit_vs             Modify config of a virtual server
  add_rs              Add a real server to a virtual server
  del_rs              Delete a real server from a virtual server
  add_bip             Add a backend ip to a virtual server
  del_bip             Delete a backend ip from a virtual server
  enable_vip          Enable a vip on bvs, i.e. bind a vip to lo and modify
                      /etc/rc.local
  disable_vip         Disable a vip on bvs, i.e. delete a vip from lo and
                      modify /etc/rc.local
  reload_keepalived   Reload keepalived process on bvs, i.e. send HUP signal
                      to keepalived process
  get_conf_all_sv     List all services in current bvs config file
  get_conf_sv         List all virtual servers of a service in current bvs
                      config file
  get_conf_vs         List configuration of a virtual service in current bvs
                      config file
  get_conf_rs         List all real servers of a virtual server in current 
                      bvs config file
  get_conf_bip        List all backend ip addresses of a virtual server in
                      current bvs config file
  get_bvs_vs          List all virtual servers on bvs
  get_bvs_rs          List all real servers of a virtual server on bvs
  get_bvs_bip         List all backend ip addresses of a virtual server on bvs
  upload_config       Upload config files to bvs
  download_config     Download config files from bvs
  backup_config       Backup current config files

Options:
  Services Related:
  service_name   name of a service
  Virtual Server Related:
  vip            IP of virtual server
  vport          Port of virtual server
  protocol       Protocol of virtual server, TCP or UDP. It's TCP by default.
  Real Server Related:
  rip           IP of real server
  rport         Port of real server
  checker        Kind of checker to use, TCP_CHECK, HTTP_GET, MISC_CHECK. It
                 also can be NO_CHECK, which means this real server has no checker.
                 NO_CHECK is the default value if checker not given.
  Backend IP Related:
  bip            Backend IP of a virtual server
  dev            which device should be used to bind bip
  mask           which mask should be used when bind bip, it shoud be in [1-32]

###############
# Change Log
###############
[2010.04.01.]	First Edition. Support various commands for operating bvs cluster nodes.

###############
# Bug Report
###############
If anything wrong, please contract to our team by email stl-net@baidu.com.
